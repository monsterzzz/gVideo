webpackJsonp([1],{"2bHb":function(t,e){},"36HN":function(t,e){},"3Cqh":function(t,e){},"B/nl":function(t,e){},"N/ny":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),r=a("mvHQ"),n=a.n(r),i=(a("2bHb"),{name:"App",methods:{saveUser:function(){sessionStorage.setItem("user",n()(this.$store.state.user)),console.log(sessionStorage.getItem("user"))}},created:function(){window.addEventListener("unload",this.saveUser),this.$store.commit("setUser",JSON.parse(sessionStorage.user))}}),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var l=a("VU/8")(i,o,!1,function(t){a("adSj")},null,null).exports,c=a("/ocq"),u={name:"HelloWorld",data:function(){return{fit:"fill",form:{username:"",password:""},ipt:"",msg:"Welcome to Your Vue.js App",imgSrc:"/static/9.png"}},methods:{onSubmit:function(){var t=this;this.axios.post(this.BaseUrl+"/api/v1/login",this.form).then(function(e){if(99999==e.data.status)t.$message.error("error form");else{var a=e.data.data;a.avatar=t.BaseUrl+""+a.avatar;n()(a);t.$store.commit("setUser",e.data.data),t.$router.push({path:"/main"})}}).catch(function(t){console.log(t)})},onSignIn:function(){this.axios.post("/api/api/v1/signIn",this.form).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"5em"}},[a("el-row",[a("el-col",{attrs:{span:8,offset:8}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("el-image",{staticStyle:{height:"160px",overflow:"hidden"},attrs:{src:t.imgSrc,fit:"fill"}}),t._v(" "),a("div",{staticStyle:{"margin-top":"20px","padding-right":"3em","padding-left":"1em"}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名:"}},[a("el-input",{model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码:"}},[a("el-input",{model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":"0px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("登录")]),t._v(" "),a("router-link",{staticStyle:{"margin-left":"20px"},attrs:{to:"/signIn"}},[a("el-button",[t._v("注册")])],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(u,p,!1,function(t){a("B/nl")},"data-v-3c643ca0",null).exports,m=a("wU2u"),f=a.n(m);a("36HN");var v={props:{size:{type:String,default:"16:9"},options:{type:Object,default:{video:{url:""}}}},data:function(){return{dp:null}},mounted:function(){var t=this,e=this.size.split(":"),a=this.$el.offsetWidth*parseInt(e[1])/parseInt(e[0]);console.log("111",a),this.$el.style.height=a+"px",this.options.element=this.$el;var s=this.dp=new f.a(this.options);console.log(this.options.video.url),console.log("!!!"),s.on("play",function(){console.log("!!"),t.$emit("play")})}},h={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"dplayer"}})},staticRenderFns:[]},g=a("VU/8")(v,h,!1,null,null,null).exports,_=a("oqQY"),x=a.n(_),b={name:"sss",data:function(){return{user:{},owner:{},videoInfo:{user:{}},danmu_ipt:"",textarea:"",comments:{},size:"100:65",options:{video:{url:"",type:"hls"},danmaku:{id:"demo",api:"https://api.prprpr.me/dplayer/"}}}},methods:{play:function(){console.log("play")},draw:function(){console.log(this.$refs.player),console.log(this.$refs.player.dp),this.$refs.player.dp.danmaku.draw({text:this.danmu_ipt,color:"#b7daff",type:"right"}),this.danmu_ipt=""},submitComment:function(){var t=this;this.axios.post(this.BaseUrl+"/api/v1/comment/add",{video_uuid:this.$route.params.uuid,content:this.textarea}).then(function(e){if("success"==e.data.data){var a={user:{nickname:t.user.nickname,avatar:t.user.avatar.replace(t.BaseUrl+"","")},comment:{content:t.textarea,time:x()().format("YYYY-MM-DD HH:mm:ss")}};t.$message.success("评论成功~"),t.textarea="",t.comments.unshift(a)}})}},computed:{},created:function(){},components:{"d-player":g},mounted:function(){var t=this;console.log("mounted"),console.log(this.$el),this.user=this.$store.state.user,this.player=this.$refs.player.dp,this.player.video.setAttribute("style","object-fit:fill"),this.axios.get(this.BaseUrl+"/api/v1/comment/"+this.$route.params.uuid).then(function(e){var a=e.data.data;a.sort(function(t,e){return x()(t.comment.time)>x()(e.comment.time)?-1:1}),t.comments=a}),this.axios.get(this.BaseUrl+"/api/v1/video/item/"+this.$route.params.uuid).then(function(e){var a=e.data.data;a.user.avatar=t.BaseUrl+""+a.user.avatar,t.videoInfo=a,t.player.switchVideo({url:t.BaseUrl+""+a.m3u8})})}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"1em"}},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-row",[a("el-row",[a("el-col",{attrs:{span:24}},[a("p",{staticStyle:{margin:"0px","font-size":"18px","margin-bottom":"5px","text-align":"left"}},[t._v(t._s(t.videoInfo.title?t.videoInfo.title:"error"))]),t._v(" "),a("p",{staticStyle:{margin:"0px","font-size":"10px","margin-bottom":"5px","text-align":"left"}},[t._v(t._s(t.videoInfo.time?t.videoInfo.time:"error"))]),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("d-player",{ref:"player",attrs:{options:t.options,size:t.size},on:{play:t.play}},[t._v("1221")]),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10px","margin-bottom":"5px"}},[a("el-col",{staticStyle:{display:"table-cell","vertical-align":"middle","text-align":"center",height:"100%"},attrs:{span:4}},[a("div",{staticStyle:{"margin-top":"0.5em","margin-bottom":"0px"}},[a("div",{staticStyle:{display:"inline","margin-left":"5px"}},[a("i",{staticClass:"icon-92",staticStyle:{"font-size":"20px"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.videoInfo.play_count))])]),t._v(" "),a("div",{staticStyle:{display:"inline","margin-left":"10px"}},[a("i",{staticClass:"icon-100",staticStyle:{"font-size":"20px"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.videoInfo.likes_count))])])])]),t._v(" "),a("el-col",{attrs:{span:15,offset:1}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.danmu_ipt,callback:function(e){t.danmu_ipt=e},expression:"danmu_ipt"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:t.draw}},[t._v("主要按钮")])],1)],1)],1)],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"40px"}},[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"5px"}}},[a("div",{staticClass:"clearfix",staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("评论区")])]),t._v(" "),a("el-row",{staticStyle:{"padding-bottom":"30px","padding-top":"30px","border-bottom":"1px solid #EBEEF5"}},[a("el-col",{staticStyle:{"text-align":"left","margin-right":"10px"},attrs:{span:1,offset:1}},[a("el-avatar",{attrs:{size:50,src:t.user.avatar}})],1),t._v(" "),a("el-col",{attrs:{span:19}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:2}},[a("p",[a("el-button",{attrs:{type:"primary"},on:{click:t.submitComment}},[t._v("发表")])],1)])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},t._l(t.comments,function(e,s){return a("div",{key:s,staticClass:"text item"},[a("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"5px"},attrs:{shadow:"never"}},[a("div",{staticStyle:{"text-align":"left"}},[a("el-row",{},[a("el-col",{attrs:{span:2}},[a("el-avatar",{attrs:{size:50,src:"http://localhost:8000"+e.user.avatar}})],1),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{staticStyle:{"font-size":"12px","font-weight":"700"},attrs:{span:12}},[t._v(t._s(e.user.nickname))])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{staticStyle:{"font-size":"14px"},attrs:{span:24}},[t._v(t._s(e.comment.content))])],1),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"font-size":"12px"},attrs:{span:24}},[t._v(t._s(e.comment.time))])],1)],1)],1)],1)])],1)}),0)],1)],1)],1)],1)],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"left","margin-left":"30px"},attrs:{span:5}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("el-divider",[a("el-avatar",{attrs:{size:50,src:t.videoInfo.user.avatar}})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"2em","text-align":"center"}},[a("p",[t._v(t._s(t.videoInfo.user.nickname?t.videoInfo.user.nickname:"该用户很懒,没有任何描述"))]),t._v(" "),a("p",[t._v(t._s(t.videoInfo.user.description?t.videoInfo.user.description:"该用户很懒,没有任何描述"))])])],1)],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"5px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t._v("推荐列表")]),t._v(" "),t._l(7,function(e){return a("div",{key:e,staticClass:"text item"},[a("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"5px"},attrs:{shadow:"never"}},[a("div",{staticClass:"text item"},[t._v(t._s("列表内容 o"))])])],1)})],2)],1)],1)],1)],1)],1)},staticRenderFns:[]};var w=a("VU/8")(b,y,!1,function(t){a("iill")},"data-v-a11c0e4a",null).exports,S={data:function(){var t=this;return{form:{username:"",password:"",nickname:"",password_confirm:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:16,message:"长度在 3 到 16 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:16,message:"长度在 3 到 16 个字符",trigger:"blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:3,max:16,message:"长度在 3 到 16 个字符",trigger:"blur"}],password_confirm:[{required:!0,message:"请确认密码",trigger:"blur"},{min:3,max:16,message:"长度在 3 到 16 个字符",trigger:"blur"},{validator:function(e,a,s){a!=t.form.password?s(new Error("两次输入密码不一致")):s()},trigger:"blur"}]}}},methods:{onSubmit:function(){var t=this;this.$refs.signInForm.validate(function(e){e?t.axios.post(t.BaseUrl+"/api/v1/signIn",t.form).then(function(t){console.log(t)}).catch(function(t){console.log(t)}):alert("!")})}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticStyle:{"margin-top":"5em"}},[a("el-col",{attrs:{span:8,offset:8}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("卡片名称")])]),t._v(" "),a("el-form",{ref:"signInForm",staticStyle:{"padding-right":"3em","margin-top":"20px"},attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"帐号:",prop:"username"}},[a("el-input",{model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"昵称:",prop:"nickname"}},[a("el-input",{model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码:",prop:"password"}},[a("el-input",{model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码:",prop:"password_confirm"}},[a("el-input",{model:{value:t.form.password_confirm,callback:function(e){t.$set(t.form,"password_confirm",e)},expression:"form.password_confirm"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("注册")]),t._v(" "),a("router-link",{attrs:{to:"/"}},[a("el-button",{attrs:{type:"primary"}},[t._v("回到主页")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},U=a("VU/8")(S,k,!1,null,null,null).exports,$=a("Xxa5"),C=a.n($),I=a("exGp"),B=a.n(I),D=a("//Fk"),z=a.n(D),F=a("JSQk"),N=a.n(F),R=a("zL8q"),M=a.n(R),E=(a("UZ5h"),a("/Luh"),{data:function(){return{percentage:0,imageUrl:"",Md5Stauts:"success",videoProgress:!1,videoUploadPercentage:0,videoMd5Percentage:0,form:{title:"",description:"",md5:"",videoUuid:"",avatarUrl:""}}},watch:{Md5Stauts:function(t){function e(e,a){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){100==t&&(Md5Stauts="success")})},methods:{onClick1:function(){this.percentage+=10},calcMd5:function(t){var e=this;return new z.a(function(a,s){var r=new FileReader,n=new N.a;r.onload=function(t){n.append(t.target.result),a(n.end())},r.onprogress=function(t){e.videoMd5Percentage=Math.floor(t.loaded/t.total*100)},r.readAsBinaryString(t.raw)})},submitChunk:function(t,e){var a=this,s=this;return new z.a(function(r,n){for(var i=Math.ceil(t.size/2097152),o=0,l={};o<i;){s.videoUploadPercentage=Math.floor(o/i*100);var c=2097152*o,u=c+2097152>t.size?t.size:c+2097152,p=t.raw.slice(c,u),d=new FormData;d.append("file",p),d.append("currentChunk",o),d.append("totalChunks",i),d.append("uuid",a.form.videoUuid),d.append("md5",e),d.append("fileType",t.raw.type.split("/")[1]),l=a.axios.post(a.BaseUrl+"/api/v1/video/upload",d),o++}r(l)})},onClick:function(){var t=this;return B()(C.a.mark(function e(){var a,s;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.videoProgress=!0,a=t.$refs.videoUpload.uploadFiles[0],s=t.$refs.avatarUpload.uploadFiles[0],t.axios.post(t.BaseUrl+"/api/v1/videoform/upload",t.form).then(function(e){return t.form.videoUuid=e.data.data,t.calcMd5(a)}).then(function(e){return t.form.md5=e,t.axios.post(t.BaseUrl+"/api/v1/videoform/checkmd5/"+e+"?uuid="+t.form.videoUuid)}).then(function(e){return 0==(e=e.data).data?t.submitChunk(a,t.form.md5):void 0}).then(function(e){t.videoUploadPercentage=100;var a=new FormData;return a.append("videoUuid",t.form.videoUuid),a.append("file",s.raw),t.axios.post(t.BaseUrl+"/api/v1/image/video/upload",a)}).then(function(e){5e4==e.data.status&&(alert("上传成功!"),t.$router.push("/main"))});case 4:case"end":return e.stop()}},e,t)}))()},handleAvatarSuccess:function(t,e){this.form.avatarUrl=t.msg},onAvatarChange:function(t){var e="image/jpeg"===(t=t.raw).type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),this.imageUrl=URL.createObjectURL(t),e&&a}}}),P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12,offset:6}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{attrs:{"label-width":"80px",model:t.form}},[a("el-form-item",{attrs:{label:"视频"}},[a("el-col",{attrs:{span:14}},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.videoProgress,expression:"videoProgress"}],ref:"videoUpload",staticStyle:{"text-align":"left","line-height":"normal"},attrs:{drag:"","auto-upload":!1,action:"/",limit:1}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("\n                    将文件拖到此处，或\n                    "),a("em",[t._v("点击上传")])])])],1),t._v(" "),a("el-col",{attrs:{span:5}},[t.videoProgress?a("el-col",{attrs:{span:24}},[a("el-col",{staticStyle:{"line-height":"normal"},attrs:{span:6}},[a("el-progress",{attrs:{type:"circle",percentage:t.videoMd5Percentage,status:t.Md5Stauts,width:20,"stroke-width":2,"show-text":!1}})],1),t._v(" "),a("el-col",{staticStyle:{"line-height":"normal"},attrs:{span:14}},[t._v("md5校验")])],1):t._e(),t._v(" "),a("el-col",{staticStyle:{"margin-top":"50px"},attrs:{span:24}},[t.videoProgress?a("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:t.videoUploadPercentage}}):t._e()],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"封面"}},[a("el-col",{attrs:{span:5}},[a("el-upload",{ref:"avatarUpload",staticClass:"avatar-uploader",attrs:{action:"/api/api/v1/image/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess,"on-change":t.onAvatarChange,"auto-upload":!1}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),a("el-button",{attrs:{type:"button"},on:{click:t.onClick}},[t._v("提交")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var A=a("VU/8")(E,P,!1,function(t){a("3Cqh")},null,null).exports,V={methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"tac"},[a("el-col",{attrs:{span:4}},[a("h5",[t._v("个人信息")]),t._v(" "),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.$route.path,router:!0},on:{open:t.handleOpen,close:t.handleClose}},[a("el-menu-item",{attrs:{index:"/main/user/info"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("导航1")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/main/user/avatar"}},[a("i",{staticClass:"el-icon-document"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("导航2")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/main/user/videorecord"}},[a("i",{staticClass:"el-icon-setting"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("导航3")])])],1)],1),t._v(" "),a("el-col",{attrs:{span:20}},[a("router-view")],1)],1)},staticRenderFns:[]},q=a("VU/8")(V,H,!1,null,null,null).exports,j={data:function(){return{f:[{name:"all",path:"/main/content"},{name:"upload",path:"/main/upload"},{name:"user",path:"/main/user"}]}},methods:{handleSelect:function(t,e){console.log(this.$route.matched[1].path)}}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-menu",{attrs:{router:"","default-active":t.$route.matched[1].path,mode:"horizontal"},on:{select:t.handleSelect}},t._l(t.f,function(e,s){return a("el-menu-item",{key:s,attrs:{index:e.path}},[t._v(t._s(s)+" - "+t._s(e.name))])}),1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:20,offset:2}},[a("router-view")],1)],1)],1)},staticRenderFns:[]};var Y=a("VU/8")(j,O,!1,function(t){a("n8hk")},null,null).exports,L={data:function(){return{d:[],lines:0,name:this.$store.state.token,nil:""==this.$store.state.token}},methods:{onClick:function(t){this.$router.push({path:"/main/item/"+t})}},mounted:function(){var t=this;this.axios.get("http://localhost:8000/api/v1/video/get").then(function(e){var a=e.data.data;t.lines=Math.floor(a.length/6)+1;for(var s=0;s<a.length;s++)a[s].avatar="http://localhost:8000"+a[s].avatar.substring(1,a[s].avatar.length);t.d=a})}},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"30px"}},t._l(t.lines,function(e){return a("el-row",{key:e,staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},t._l(t.d.slice(6*(e-1),1==e?6:t.d.length),function(e,s){return a("el-col",{key:s,attrs:{span:4}},[a("el-link",{attrs:{underline:!1},nativeOn:{click:function(a){return t.onClick(e.uuid)}}},[a("el-image",{staticStyle:{width:"220px",height:"220px"},attrs:{src:e.avatar,fit:"fill"}}),t._v(" "),a("p",{staticStyle:{margin:"0px","text-align":"left"}},[t._v(t._s(e.title))])],1)],1)}),1)}),1)},staticRenderFns:[]};var J=a("VU/8")(L,W,!1,function(t){a("NRlC")},null,null).exports,G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"3em"}},[a("el-row",[a("el-col",{attrs:{span:15,offset:4}},[a("el-card",[a("div",{staticClass:"clearfix",staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("概览")])]),t._v(" "),a("el-col",{attrs:{span:23,offset:1}},[a("el-form",{attrs:{"label-width":"80px",model:t.user}},[a("el-form-item",{attrs:{label:"帐号"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{disabled:""},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"昵称"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{disabled:t.nicknameDisable},model:{value:t.user.nickname,callback:function(e){t.$set(t.user,"nickname",e)},expression:"user.nickname"}})],1),t._v(" "),a("el-col",{attrs:{span:2,offset:1}},[t.nicknameDisable?a("el-button",{attrs:{type:"text"},on:{click:t.editNickName}},[t._v("修改")]):a("el-button",{attrs:{type:"text"},on:{click:t.saveNickName}},[t._v("保存")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{type:"textarea",disabled:t.descriptionDisable},model:{value:t.user.description,callback:function(e){t.$set(t.user,"description",e)},expression:"user.description"}})],1),t._v(" "),a("el-col",{attrs:{span:2,offset:1}},[t.descriptionDisable?a("el-button",{attrs:{type:"text"},on:{click:t.editDescription}},[t._v("修改")]):a("el-button",{attrs:{type:"text"},on:{click:t.saveDescription}},[t._v("保存")])],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Q=a("VU/8")({data:function(){return{state:"",nicknameDisable:!0,descriptionDisable:!0,user:{username:"",nickname:"",description:"",avatar:""}}},methods:{editNickName:function(){this.nicknameDisable=!this.nicknameDisable},saveNickName:function(){var t=this;this.axios.post(this.BaseUrl+"/api/v1/user/nickname",{nickname:this.user.nickname}).then(function(e){var a=e.data;66666==a.status?(t.$store.commit("setUserNickname",t.user.nickname),t.editNickName()):t.$message.error(a.data)})},editDescription:function(){this.descriptionDisable=!this.descriptionDisable},saveDescription:function(){var t=this;this.axios.post(this.BaseUrl+"/api/v1/user/description",{description:this.user.description}).then(function(e){var a=e.data;77777==a.status?(t.$store.commit("setUserDescription",t.user.description),t.editDescription()):t.$message.error(a.data)})}},mounted:function(){var t=this.$store.state;this.user=t.user},computed:{init:function(){return this.$store.state.user}}},G,!1,function(t){a("N/ny")},null,null).exports,T={data:function(){return{imageUrl:"",user:{username:"",nickname:"",description:"",avatar:""}}},methods:{handleAvatarSuccess:function(t,e){console.log(t),this.$message.info("上传成功!")},submit:function(){var t=this,e=new FormData;console.log(this.$refs.avatar.uploadFiles),e.append("file",this.$refs.avatar.uploadFiles[0].raw),this.axios.post(this.BaseUrl+"/api/v1/image/avatar/upload",e).then(function(e){var a=e.data;5e4==a.status&&(console.log(a.data),t.$store.commit("setUserAvatar",t.BaseUrl+""+a.data.path)),console.log(t.$store.state),t.user=t.$store.state.user})},onChange:function(t){var e="image/jpeg"===t.raw.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a&&(this.imageUrl=window.URL.createObjectURL(t.raw)),e&&a}},mounted:function(){var t=this.$store.state.user;this.user=t,console.log(t),console.log(this.user)}},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"3em"}},[a("el-row",[a("el-col",{attrs:{span:15,offset:4}},[a("el-card",[a("p",{staticStyle:{"text-align":"left","margin-left":"20px","margin-top":"0px"}},[t._v("头像")]),t._v(" "),a("el-divider",[a("el-avatar",{attrs:{size:70,src:t.user.avatar}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-top":"3.5em"},attrs:{span:20,offset:1}},[a("el-col",{attrs:{span:21}},[a("el-row",[a("el-col",{staticStyle:{"border-right-style":"dashed","border-right-width":"1px"},attrs:{span:10,offset:5}},[a("el-upload",{ref:"avatar",staticClass:"avatar-uploader",staticStyle:{"text-align":"left"},attrs:{action:"/api/api/v1/image/avatar/upload","on-change":t.onChange,"auto-upload":!1,"show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:3,offset:3}},[a("el-avatar",{staticStyle:{"margin-top":"3.5em"},attrs:{size:70,src:t.imageUrl}})],1)],1),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-top":"20px","padding-bottom":"30px"},attrs:{span:6,offset:12}},[a("el-button",{on:{click:t.submit}},[t._v("修改")])],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Z=a("VU/8")(T,X,!1,function(t){a("g1+q")},null,null).exports,K={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"3.5em"}},[a("el-row",[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{span:20,offset:2}},[a("el-card",{staticClass:"box-card"},[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"time",label:"日期",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"picture",label:"封面",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"50px"},attrs:{src:t.row.picture}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"title","show-overflow-tooltip":!0,label:"标题"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description","show-overflow-tooltip":!0,label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"play_count",label:"播放数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"likes_count",label:"播放数"}})],1)],1)])],1)],1)],1)},staticRenderFns:[]},tt=a("VU/8")({data:function(){return{loading:!0,tableData:[]}},mounted:function(){var t=this;this.axios.get(this.BaseUrl+"/api/v1/user/videorecords").then(function(e){for(var a=e.data.data,s=0;s<a.length;s++)a[s].picture=t.BaseUrl+""+a[s].picture.substring(1);t.tableData=a,t.loading=!1})}},K,!1,null,null,null).exports;s.default.use(c.a);var et=new c.a({mode:"history",routes:[{path:"/",name:"HelloWorld",component:d},{path:"/signIn",name:"SignIn",component:U},{path:"/main",name:"Main",redirect:"main/content",component:Y,children:[{path:"/main/item/:uuid",name:"Item",component:w},{path:"/main/content",component:J},{path:"/main/upload",component:A},{path:"/main/user",name:"User",redirect:"/main/user/info",component:q,children:[{path:"/main/user/info",component:Q},{path:"/main/user/avatar",component:Z},{path:"/main/user/videorecord",component:tt}]}]}]}),at=(a("tvR6"),a("mtWM")),st=a.n(at),rt=a("Rf8U"),nt=a.n(rt),it=a("NYxO");s.default.use(it.a);var ot={setUser:function(t,e){t.user=e,sessionStorage.user=n()(e)},setUserAvatar:function(t,e){t.user.avatar=e;var a=t.user;sessionStorage.user=n()(a)},setUserNickname:function(t,e){t.user.nickname=e;var a=t.user;sessionStorage.user=n()(a)},setUserDescription:function(t,e){t.user.description=e;var a=t.user;sessionStorage.user=n()(a)},delUser:function(t){t.token={},sessionStorage.removeItem("user")}},lt=new it.a.Store({state:{user:{}},mutations:ot});window.Hls=a("YT+p"),st.a.defaults.withCredentials=!0,s.default.use(M.a),s.default.use(nt.a,st.a),s.default.config.productionTip=!1,s.default.prototype.BaseUrl="http://localhost:8000",et.beforeEach(function(t,e,a){a()});new s.default({el:"#app",router:et,store:lt,components:{App:l},template:"<App/>"})},NRlC:function(t,e){},adSj:function(t,e){},"g1+q":function(t,e){},iill:function(t,e){},n8hk:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.181fa0d7ddf31b6e7ff2.js.map